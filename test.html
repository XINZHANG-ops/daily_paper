<svg width="100%" viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg">

    <!-- Define styles -->
    <style>
      .title { font-family: sans-serif; font-size: 28px; font-weight: bold; text-anchor: middle; fill: #333; }
      .phase-title { font-family: sans-serif; font-size: 20px; font-weight: bold; text-anchor: middle; fill: #222; }
      .step-text { font-family: sans-serif; font-size: 14px; text-anchor: middle; fill: #111; }
      .output-text { font-family: sans-serif; font-size: 15px; font-weight: bold; text-anchor: middle; fill: #0056b3; }
      .arrow-head { fill: #555; }
      .arrow-line { stroke: #555; stroke-width: 2; }
    </style>
  
    <!-- Define arrow marker -->
    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" class="arrow-head" />
      </marker>
    </defs>
  
    <!-- Title -->
    <text x="500" y="40" class="title">DeepSeek LLM Methodology Flowchart</text>
  
    <!-- Phase 1: Scaling Law Investigation -->
    <g id="phase1">
      <rect x="150" y="80" width="700" height="150" rx="15" ry="15" fill="#e0f7fa" stroke="#b2ebf2" stroke-width="1"/>
      <text x="500" y="110" class="phase-title">Phase 1: Scaling Law Investigation</text>
      <rect x="180" y="130" width="200" height="70" rx="5" ry="5" fill="#b2ebf2" />
      <text x="280" y="155" class="step-text">Study Hyperparameter</text>
      <text x="280" y="175" class="step-text">(Batch Size, LR) Scaling</text>
      <rect x="400" y="130" width="200" height="70" rx="5" ry="5" fill="#b2ebf2" />
      <text x="500" y="155" class="step-text">Study Optimal Model/</text>
      <text x="500" y="175" class="step-text">Data Scaling Allocation</text>
      <rect x="620" y="130" width="200" height="70" rx="5" ry="5" fill="#b2ebf2" />
      <text x="720" y="155" class="step-text">Analyze Dataset Impact</text>
      <text x="720" y="175" class="step-text">on Scaling Laws</text>
    </g>
  
    <!-- Arrow 1 -->
    <line x1="500" y1="230" x2="500" y2="260" class="arrow-line" marker-end="url(#arrow)" />
    <text x="520" y="250" class="step-text" style="font-style: italic; fill: #555;">Guides</text>
  
    <!-- Phase 2: Pre-training -->
    <g id="phase2">
      <rect x="150" y="270" width="700" height="180" rx="15" ry="15" fill="#e8f5e9" stroke="#c8e6c9" stroke-width="1"/>
      <text x="500" y="300" class="phase-title">Phase 2: Pre-training</text>
      <rect x="180" y="320" width="200" height="70" rx="5" ry="5" fill="#c8e6c9" />
      <text x="280" y="345" class="step-text">Data Collection</text>
      <text x="280" y="365" class="step-text">(2T+ Tokens, En/Zh)</text>
      <rect x="400" y="320" width="200" height="70" rx="5" ry="5" fill="#c8e6c9" />
      <text x="500" y="345" class="step-text">Model Architecture</text>
      <text x="500" y="365" class="step-text">(LLaMA-based, Multi-step LR)</text>
      <rect x="620" y="320" width="200" height="70" rx="5" ry="5" fill="#c8e6c9" />
      <text x="720" y="345" class="step-text">Train Models</text>
      <text x="720" y="365" class="step-text">(e.g., 7B, 67B)</text>
      <!-- Output -->
      <ellipse cx="500" cy="425" rx="150" ry="20" fill="#a5d6a7"/>
      <text x="500" y="430" class="output-text">Output: DeepSeek LLM Base Models</text>
    </g>
  
    <!-- Arrow 2 -->
    <line x1="500" y1="450" x2="500" y2="480" class="arrow-line" marker-end="url(#arrow)" />
  
    <!-- Phase 3: Alignment -->
    <g id="phase3">
      <rect x="150" y="490" width="700" height="150" rx="15" ry="15" fill="#fff3e0" stroke="#ffe0b2" stroke-width="1"/>
      <text x="500" y="520" class="phase-title">Phase 3: Alignment</text>
      <rect x="180" y="540" width="270" height="40" rx="5" ry="5" fill="#ffe0b2" />
      <text x="315" y="565" class="step-text">SFT Data Collection (>1M Instances)</text>
      <rect x="470" y="540" width="170" height="40" rx="5" ry="5" fill="#ffe0b2" />
      <text x="555" y="565" class="step-text">Supervised Fine-Tuning (SFT)</text>
      <rect x="660" y="540" width="190" height="40" rx="5" ry="5" fill="#ffe0b2" />
      <text x="755" y="565" class="step-text">Direct Preference Opt. (DPO)</text>
      <!-- Output -->
      <ellipse cx="500" cy="615" rx="150" ry="20" fill="#ffcc80"/>
      <text x="500" y="620" class="output-text">Output: DeepSeek Chat Models</text>
    </g>
  
    <!-- Arrow 3 -->
    <line x1="500" y1="640" x2="500" y2="670" class="arrow-line" marker-end="url(#arrow)" />
  
    <!-- Phase 4: Evaluation -->
    <g id="phase4">
      <rect x="150" y="680" width="700" height="100" rx="15" ry="15" fill="#ede7f6" stroke="#d1c4e9" stroke-width="1"/>
      <text x="500" y="705" class="phase-title">Phase 4: Evaluation</text>
      <rect x="180" y="720" width="310" height="45" rx="5" ry="5" fill="#d1c4e9" />
      <text x="335" y="738" class="step-text">Evaluate Base Models</text>
      <text x="335" y="755" class="step-text">(Benchmarks: Code, Math, Reasoning)</text>
      <rect x="510" y="720" width="310" height="45" rx="5" ry="5" fill="#d1c4e9" />
      <text x="665" y="738" class="step-text">Evaluate Chat Models</text>
      <text x="665" y="755" class="step-text">(Benchmarks, Open-Ended, Safety)</text>
    </g>
  
  </svg>